"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[537],{6126:(e,t,r)=>{r.d(t,{E:()=>c});var i=r(5155);r(2115);var s=r(9708),a=r(2085),n=r(9434);let o=(0,a.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,asChild:a=!1,...c}=e,d=a?s.DX:"span";return(0,i.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(o({variant:r}),t),...c})}},6622:(e,t,r)=>{function i(e){if(!Number.isFinite(e)||e<=0)return"0 Bytes";let t=["Bytes","KB","MB","GB","TB"],r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1);return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(2))," ").concat(t[r])}function s(e){try{return new Date(e).toLocaleString("zh-CN")}catch(t){return e}}r.d(t,{Y:()=>s,v:()=>i})},9537:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var i=r(5155),s=r(2115),a=r(5143),n=r(402),o=r(8266),c=r(6695),d=r(6126),l=r(285),u=r(7434),h=r(7213),m=r(9890),p=r(4357),g=r(6516),x=r(2525),v=r(6622);function f(e){let{items:t,onReorder:r,onSelectItem:s,onCopy:o,onRequestDelete:c,onRequestShare:d}=e,l=(0,a.FR)((0,a.MS)(a.AN,{activationConstraint:{distance:6}}),(0,a.MS)(a.uN,{coordinateGetter:n.JR}));return(0,i.jsx)(a.Mp,{sensors:l,collisionDetection:a.fp,onDragEnd:function(e){let{active:i,over:s}=e;if(s&&i.id!==s.id){let e=t.findIndex(e=>e.id===i.id),a=t.findIndex(e=>e.id===s.id);e>=0&&a>=0&&r((0,n.be)(t,e,a))}},children:(0,i.jsx)(n.gB,{items:t.map(e=>e.id),children:(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(e=>(0,i.jsx)(b,{id:e.id,item:e,onSelectItem:s,onCopy:o,onRequestDelete:c,onRequestShare:d},e.id))})})})}let b=s.memo(function(e){let{id:t,item:r,onSelectItem:s,onCopy:a,onRequestDelete:f,onRequestShare:b}=e,{attributes:j,listeners:N,setNodeRef:y,transform:w,transition:k,isDragging:M}=(0,n.gl)({id:t}),A={transform:o.Ks.Transform.toString(w),transition:k,opacity:M?.5:1};return(0,i.jsx)("div",{ref:y,style:A,...j,...N,children:(0,i.jsxs)(c.Zp,{className:"group relative hover:shadow-md transition-shadow cursor-pointer h-52",onClick:()=>{M||s(r.id)},children:[(0,i.jsx)(c.aR,{className:"pb-3",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[function(e){switch(e){case"TEXT":return(0,i.jsx)(u.A,{className:"h-4 w-4"});case"IMAGE":return(0,i.jsx)(h.A,{className:"h-4 w-4"});default:return(0,i.jsx)(m.A,{className:"h-4 w-4"})}}(r.type),(0,i.jsx)(d.E,{variant:"secondary",children:r.type})]}),(0,i.jsxs)("div",{className:"flex gap-1 items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,i.jsx)(l.$,{size:"sm",variant:"ghost",className:"cursor-pointer",onClick:e=>{e.stopPropagation(),r.content&&a(r.content)},disabled:!r.content,children:(0,i.jsx)(p.A,{className:"h-3 w-3"})}),(0,i.jsx)(l.$,{size:"sm",variant:"ghost",className:"cursor-pointer",onClick:e=>{e.stopPropagation(),b(r.id)},"aria-label":"分享",title:"分享",children:(0,i.jsx)(g.A,{className:"h-3 w-3"})}),(0,i.jsx)(l.$,{size:"sm",variant:"ghost",className:"cursor-pointer",onClick:e=>{e.stopPropagation(),f(r.id)},"aria-label":"删除",title:"删除",children:(0,i.jsx)(x.A,{className:"h-3 w-3"})})]})]})}),(0,i.jsxs)(c.Wu,{className:"pb-12",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[("FILE"===r.type||"IMAGE"===r.type)&&(0,i.jsx)("p",{className:"text-sm font-medium truncate",children:r.fileName||("IMAGE"===r.type?"图片":"文件")}),r.content&&(0,i.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-3",children:r.content})]}),(0,i.jsxs)("div",{className:"absolute bottom-3 right-3 text-right text-xs text-muted-foreground",children:["number"==typeof r.fileSize&&r.fileSize>0&&(0,i.jsxs)("div",{children:["大小: ",(0,v.v)(r.fileSize)]}),(0,i.jsx)("div",{children:(0,v.Y)(r.createdAt)})]})]})]})})})}}]);